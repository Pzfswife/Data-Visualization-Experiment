<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>打包图</title>
</head>
<body>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script>
  var width=500;
  var height=500;

  var pack=d3.layout.pack()
  .size([width,height])
  .radius(20);

  var svg=d3.select("body" ).append("svg")
    .attr("width",width)
    .attr("height",height)
    .append("g")
    .attr("transform","translate(0,0)");

  d3.json("mind-map.json", function(error, root){
  var nodes =pack.nodes(root);
  var links = pack.links(nodes);

  svg.selectAll("circle" )
    .data(nodes)
    .enter( ).append( "circle" )
    .attr("fill","rgb(165,62,176)")
    .attr("fill-opacity","0.4")
    .attr("cx", function(d) {return d.x;})
    .attr("cy" , function(d){return d.y;})
    .attr("r",function(d){return d.r;})
    .on("mouseover",function(d,i){
      d3.select(this)

        .attr("fill","yellow");
    })
    .on("mouseout", function (d, i) {
        d3.select(this).attr("fill", "rgb(73,7,112)");
      });

      svg.selectAll("text")
        .data(nodes)
        .enter().append("text")
        .attr("font-size", "7px")
        .attr("fill", "white")
        .attr("fill-opacity", function (d) {
          if (d.depth == 2) return "0.9";
          else return "0";
        })
        .attr("x", function (d) {return d.x;})
        .attr("y", function (d) {return d.y;})
        .attr("dx", -15)
        .attr("dy", 1)
        .text(function (d) {return d.name;});
    });
</script>
</body>
</html>
